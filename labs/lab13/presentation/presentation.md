---
## Front matter
lang: ru-RU
title: Презентация по лабораторной работе №13
author: |
	Шмырин Михаил Сергеевич
institute: |
	Российский Университет Дружбы Народов
date: 

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

# Цель работы

Цель данной лабораторной работы - приобретение простейших навыков разработки, анализа, тестирования и отладки приложений в ОС типа Linux на примере создания на языке программирования C калькулятора с простейшими функциями.


# Выполнение лабораторной работы

1. В домашнем каталоге создал  подкаталог ~/work/os/lab_prog и в нем уже создал  три файла calculate.h, calculate.c, main.c (рис. [-@fig:01]). Это будет примитивнейший калькулятор, способный складывать, вычитать, умножать и делить, возводить число в степень, брать квадратный корень, вычислять sin, cos, tan. При запуске он будет запрашивать первое число, операцию, второе число. После этого программа выведет результат и остановится.

![Создание каталогов и файлов](image/1.png){ #fig:01 width=70% }

## Программы для работы калькулятора 

2. В созданных файлах написал  программы для работы калькулятора, которые были предоставлены (рис. [-@fig:02] , [-@fig:03] , [-@fig:04] , [-@fig:05])

![calculate.c](image/3.png){ #fig:02 width=20% }

## calculate.c

![calculate.c](image/4.png){ #fig:03 width=50% }

## calculate.h

![calculate.h](image/2.png){ #fig:04 width=60% }

## main.c

![main.c](image/5.png){ #fig:05 width=60% }

## Компиляция

3. Выполнил  компиляцию программы посредством gcc и при необходимости исправил  синтаксис (рис. [-@fig:06])

![Компиляция](image/6.png){ #fig:06 width=70% }

## Makefile

4. Создал  Makefile (рис. [-@fig:07]) и ввел  в него предложенное содержимое (рис. [-@fig:08])

![Создал  Makefile](image/7.png){ #fig:07 width=60% }

![Makefile](image/8.png){ #fig:08 width=33% }

Данный файл необходим для автоматической компиляции файлов calculate.c (цель calculate.o), main.c (main.o цель), а также их объединения в один исполняемый файл calcul. Claen нужно для автоматического удаления файлов. Переменная CC отвечает за утилиту для компиляции. Переменная CFLAGS отвечает за опции в данной утилите. Переменная LIBS отвечает за опции для объединения объектных файлов в один исполняемый файл.

## Makefile исправленный

5. Далее исправил  Makefile (рис. [-@fig:09]). В переменную CFLAGS добавил  опцию -g необходимую для компиляции объектных файлов и их использования в программе отладчика GDВ. Сдел ем так, что утилита компиляции выбирается с помощью перемнной CC

![Makefile исправленный](image/9.png){ #fig:09 width=70% }

## Удаление исполняемых файлов и компиляция

После этого удалил  исполняемые файлы (make clean) и выполнил  компиляцию файлов, используя команды make calculate.o, make main.o, make calcul (рис. [-@fig:010])

![clean and make ](image/10.png){ #fig:010 width=70% }

## Отладка

6. Далее с помощью команды gdb ./calcul запустил  отладку программы (рис. [-@fig:011])

![отладка](image/11.png){ #fig:011 width=70% }

## Запуск программы внутри отладчика

Для запуска программы внутри отладчика ввел  команду run (рис. [-@fig:012])

![run](image/12.png){ #fig:012 width=70% }

## Постраничный просмотр кода

Для постраничного (по 9 строк) просмотра исходного кода использовал  команду list (рис. [-@fig:013])

![list](image/13.png){ #fig:013 width=70% }

## Просмотр строк с 12 по 15

Для просмотра строк с 12 по 15 основного файла использовал  list с параметрами (рис. [-@fig:014])

![list с параметрами](image/14.png){ #fig:014 width=70% }

## Просмотр определённых строк

Для просмотра определенных строк не основного файла использовал  list с параметрами (рис. [-@fig:015])

![15](image/15.png){ #fig:015 width=70% }

## Точка останова

Установил  точку останова в файле calculate.c на строке 18 и вывел  информацию об имеющихся в проекте точках (рис. [-@fig:016])

![точки останова](image/17.png){ #fig:016 width=70% }

## Просмотр всего стека вызываемых функций

Ввел  команду backtrace которая показал  весь стек вызываемых функций от начал  программы до текущего места (рис. [-@fig:018])

![backtrace](image/18.png){ #fig:018 width=70% }

## Значение переменной Numeral

Посмотрел  чему равно на этом этапе значение перемнной Numeral введя команду print Numeral и сравнил  с результатом команды display Numeral (рис. [-@fig:019])

![Numeral](image/19.png){ #fig:019 width=70% }

## Точки останова

Убрал  точки останова (рис. [-@fig:020])

![Убрал  точки останова](image/20.png){ #fig:020 width=70% }

## Утилита split

7. С помощью утилиты splint проанализировал  коды файлов calculate.c main.c . Воспользовал сь командлй splint calculate.c и splint main.c (рис. [-@fig:021]) (рис. [-@fig:022]). С помощью этой команды выяснилось. что в файлах присутствует функция чтения, возвращающая целое число, но эти числа не используются и нигде не сохраняются. Утилита вывел  предупреждение о том, что в файле происходит сравнение вещественного числа с нулем. Также возвращаемые значения в фугкциях записываются в переменную, что свидетельствует о потери данных

![splint main.c](image/22.png){ #fig:022 width=30% }

## splint calculate.c

![splint calculate.c](image/21.png){ #fig:021 width=70% }

# Выводы

В ходе данной лабораторной работы я приобрел  навыки разработки, анализа, тестирования и отладки приложений в ОС на примере создания на языке программирования С калькулятора с простейшими функциями.
